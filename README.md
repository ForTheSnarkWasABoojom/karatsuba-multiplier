# Генератор Карацубы

Этот проект представляет собой **инструмент на языке C++**, который генерирует модули на Verilog, реализующие алгоритм умножения Карацубы. Также создаются соответствующие тестбенчи для проверки этих модулей.

## Оглавление

- [Описание](#описание)
- [Структура проекта](#структура-проекта)
- [Необходимые зависимости](#необходимые-зависимости)
- [Сборка проекта](#сборка-проекта)
- [Использование](#использование)
- [Цели Makefile](#цели-makefile)
- [Тестирование](#тестирование)

## Описание

**Генератор Карацубы** принимает на вход целое число `N` и генерирует модуль на Verilog, реализующий умножитель Карацубы для чисел с разрядностью `N`.


## Структура проекта

```
project_root/
├── src
│   ├── main.cpp                         # Основной модуль
│   ├── generator
│   │   ├── verilog_generator.cpp        # Логика генерации кода на Verilog
│   │   ├── verilog_generator.h          # Заголовочный файл генератора Verilog
├── tests
│   ├── test.cpp                         # Тесты с использованием библиотеки Google Test
├── output                               # Директория для сгенерированных файлов Verilog
├── Makefile                             # Автоматизация сборки и запуска
├── README.md                            # Описание проекта

```
## Необходимые зависимости

Для успешной работы проекта на Linux необходимо установить следующие зависимости:

### Компилятор C++ с поддержкой C++20
Убедитесь, что у вас установлен компилятор, поддерживающий стандарт C++20. Например, **g++**:
```
   sudo apt-get install g++
```
### Библиотека Google Test
Для выполнения unit-тестов используется библиотека Google Test. Установить его можно с помощью следующих команд:

```
sudo apt-get install libgtest-dev
sudo apt-get install cmake
cd /usr/src/gtest
sudo cmake CMakeLists.txt
sudo make
sudo cp lib/*.a /usr/lib
```
### Verilog 
Для симуляции сгенерированных модулей Verilog используются инструмент iverilog. Его можно установить следующей командой:

```
sudo apt-get install iverilog
```

Убедитесь, что все перечисленные зависимости установлены перед сборкой проекта.

## Сборка проекта
Проект использует Makefile для автоматизации сборки и запуска. Для сборки основного приложения необходимо выполнить команду из папки проекта:
```
make build
```
Эта команда скомпилирует основную программу и создаст исполняемый файл karatsuba-gen в директории output/.
## Использование

Чтобы сгенерировать модуль умножителя Карацубы для чисел с разрядностью N, необходимо запустить исполняемый файл karatsuba-gen с указанием значения N:

```
./output/karatsuba-gen 5
```

Этот вызов создаст файл Verilog с именем `karatsuba_multiplier.v` в папке `output`.

### Генерация модулей Verilog с использованием `make run`

Для удобства запуска генератора Карацубы через **Makefile**, можно использовать команду `make run`:

```
make run ARGS="5"
```
Этот вызов сгенерирует Verilog-модуль с разрядностью 5 и сохранит его в файл `karatsuba_multiplier.v`.

### Указание выходного файла
С помощью аргумента -output возможно указать имя выходного файла :

```
./output/karatsuba-gen 5 -output output/my_multiplier.v
```
Этот вызов создаст файл `my_multiplier.v` в папке output.

## Цели Makefile
В Makefile определены несколько целей для удобства использования:
```
make build: Компилирует основную программу.
make run ARGS="<N> [-output <filename>]": Запускает генератор Карацубы. Можно передать разрядность N и опционально имя выходного файла.
make build_test: Компилирует тесты.
make run_test: Запускает тесты с использованием библиотеки Google Test.
make clean: Удаляет скомпилированные исполняемые файлы.
make all: Последовательно выполняет сборку программы, тестов и запускает тесты.
```
Примеры команд:
Для генерации умножителя с разрядностью 5:
```
make run ARGS="5"
```
Для запуска тестов:
```
make run_test
```
## Тестирование
В проекте используются тесты с использованием библиотеки Google Test. Тесты проверяют как генерацию модулей Verilog, так и тестбенчи. Файлы тестов находятся в директории tests/test.cpp.

Реализована возможность собрать и запустить тесты с помощью команды:
```
make run_test
```
